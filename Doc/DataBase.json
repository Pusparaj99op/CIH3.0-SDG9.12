{
  "project": {
    "name": "Mudra Database",
    "database": "MongoDB",
    "approach": "Incremental Schema Development"
  },
  "development_approach": {
    "principle": "Start with one model, add more as needed",
    "methodology": "Each iteration adds only what's necessary",
    "no_premature_optimization": "Simple schemas first, add indexes later"
  },
  "incremental_schema": {
    "iteration_0_2": {
      "database": "None (JSON file)",
      "reason": "Get frontend working first",
      "data_file": "data/bonds.json"
    },
    "iteration_3": {
      "database": "MongoDB",
      "collections": ["bonds"],
      "models": {
        "Bond": {
          "purpose": "Store bond information",
          "schema": {
            "name": {
              "type": "String",
              "required": true,
              "example": "National Highway Authority Bond"
            },
            "issuer": {
              "type": "String",
              "required": true,
              "example": "NHAI"
            },
            "returnRate": {
              "type": "Number",
              "required": true,
              "example": 7.5,
              "description": "Annual return percentage"
            },
            "riskLevel": {
              "type": "String",
              "enum": ["Low", "Medium", "High"],
              "default": "Medium"
            },
            "price": {
              "type": "Number",
              "required": true,
              "example": 1000,
              "description": "Price per unit in INR"
            },
            "description": {
              "type": "String",
              "example": "Government-backed infrastructure bond"
            },
            "createdAt": {
              "type": "Date",
              "default": "Date.now"
            }
          }
        }
      }
    },
    "iteration_5": {
      "collections": ["bonds", "users"],
      "new_model": {
        "User": {
          "purpose": "Store user accounts",
          "schema": {
            "email": {
              "type": "String",
              "required": true,
              "unique": true,
              "lowercase": true
            },
            "password": {
              "type": "String",
              "required": true,
              "note": "Stored as bcrypt hash"
            },
            "name": {
              "type": "String",
              "required": true
            },
            "wallet": {
              "type": "Number",
              "default": 1000000,
              "description": "Paper trading balance in INR"
            },
            "createdAt": {
              "type": "Date",
              "default": "Date.now"
            }
          }
        }
      }
    },
    "iteration_8": {
      "collections": ["bonds", "users", "transactions", "portfolios"],
      "new_models": {
        "Transaction": {
          "purpose": "Record all buy/sell operations",
          "schema": {
            "user": {
              "type": "ObjectId",
              "ref": "User",
              "required": true,
              "index": true
            },
            "bond": {
              "type": "ObjectId",
              "ref": "Bond",
              "required": true
            },
            "type": {
              "type": "String",
              "enum": ["buy", "sell"],
              "required": true
            },
            "quantity": {
              "type": "Number",
              "required": true,
              "min": 1
            },
            "pricePerUnit": {
              "type": "Number",
              "required": true
            },
            "totalAmount": {
              "type": "Number",
              "required": true
            },
            "createdAt": {
              "type": "Date",
              "default": "Date.now",
              "index": true
            }
          }
        },
        "Portfolio": {
          "purpose": "Track user bond holdings",
          "schema": {
            "user": {
              "type": "ObjectId",
              "ref": "User",
              "required": true,
              "unique": true,
              "index": true
            },
            "holdings": {
              "type": "Array",
              "items": {
                "bond": {
                  "type": "ObjectId",
                  "ref": "Bond"
                },
                "quantity": {
                  "type": "Number",
                  "min": 0
                },
                "averagePrice": {
                  "type": "Number"
                },
                "totalInvested": {
                  "type": "Number"
                }
              }
            },
            "totalValue": {
              "type": "Number",
              "default": 0
            },
            "updatedAt": {
              "type": "Date",
              "default": "Date.now"
            }
          }
        }
      }
    },
    "iteration_13": {
      "schema_updates": {
        "Bond": {
          "add_fields": {
            "riskScore": {
              "type": "Number",
              "min": 0,
              "max": 100,
              "description": "AI-calculated risk score"
            },
            "sector": {
              "type": "String",
              "enum": ["Infrastructure", "Energy", "Transport", "Urban", "Other"]
            },
            "maturityDate": {
              "type": "Date"
            },
            "minInvestment": {
              "type": "Number",
              "default": 1000
            }
          }
        }
      }
    },
    "iteration_19": {
      "schema_updates": {
        "Bond": {
          "add_fields": {
            "currentPrice": {
              "type": "Number",
              "description": "Real-time price for WebSocket updates"
            },
            "priceHistory": {
              "type": "Array",
              "items": {
                "price": "Number",
                "timestamp": "Date"
              },
              "description": "Price changes for charts"
            }
          }
        }
      }
    }
  },
  "sample_data": {
    "bonds": [
      {
        "name": "NHAI Infrastructure Bond 2025",
        "issuer": "National Highways Authority of India",
        "returnRate": 7.5,
        "riskLevel": "Low",
        "price": 1000,
        "riskScore": 25,
        "description": "Government-backed highway development bond"
      },
      {
        "name": "Mumbai Metro Phase 4 Bond",
        "issuer": "Mumbai Metro Rail Corporation",
        "returnRate": 8.2,
        "riskLevel": "Low",
        "price": 1500,
        "riskScore": 30,
        "description": "Urban transit infrastructure bond"
      },
      {
        "name": "Solar Power Infrastructure Bond",
        "issuer": "NTPC Renewable Energy Ltd",
        "returnRate": 9.0,
        "riskLevel": "Medium",
        "price": 2000,
        "riskScore": 45,
        "description": "Green energy infrastructure bond"
      },
      {
        "name": "Smart City Development Bond",
        "issuer": "Smart Cities Mission SPV",
        "returnRate": 8.5,
        "riskLevel": "Medium",
        "price": 2500,
        "riskScore": 50,
        "description": "Urban development and smart infrastructure"
      },
      {
        "name": "Port Expansion Bond",
        "issuer": "Adani Ports and SEZ Ltd",
        "returnRate": 10.5,
        "riskLevel": "High",
        "price": 5000,
        "riskScore": 70,
        "description": "Maritime infrastructure expansion bond"
      },
      {
        "name": "Railway Electrification Bond",
        "issuer": "Indian Railways Finance Corporation",
        "returnRate": 7.8,
        "riskLevel": "Low",
        "price": 1200,
        "riskScore": 20,
        "description": "Railway modernization and electrification"
      },
      {
        "name": "Water Infrastructure Bond",
        "issuer": "Jal Jeevan Mission",
        "returnRate": 7.2,
        "riskLevel": "Low",
        "price": 800,
        "riskScore": 22,
        "description": "Rural water supply infrastructure"
      },
      {
        "name": "Data Center Infrastructure Bond",
        "issuer": "NxtGen Datacenter & Cloud Tech",
        "returnRate": 11.0,
        "riskLevel": "High",
        "price": 3000,
        "riskScore": 65,
        "description": "Digital infrastructure expansion"
      },
      {
        "name": "Airport Development Bond",
        "issuer": "GMR Airports Infrastructure Ltd",
        "returnRate": 9.5,
        "riskLevel": "Medium",
        "price": 4000,
        "riskScore": 55,
        "description": "Aviation infrastructure development"
      },
      {
        "name": "Expressway Development Bond",
        "issuer": "Uttar Pradesh Expressways Authority",
        "returnRate": 8.8,
        "riskLevel": "Medium",
        "price": 1800,
        "riskScore": 40,
        "description": "State highway and expressway projects"
      }
    ]
  },
  "indexes_by_iteration": {
    "iteration_3": {
      "bonds": ["name (text)", "riskLevel"]
    },
    "iteration_5": {
      "users": ["email (unique)"]
    },
    "iteration_8": {
      "transactions": ["user", "createdAt"],
      "portfolios": ["user (unique)"]
    },
    "iteration_11": {
      "bonds": ["returnRate", "riskScore", "price"]
    }
  },
  "connection_config": {
    "development": {
      "uri": "mongodb://localhost:27017/mudra_dev",
      "options": {
        "useNewUrlParser": true,
        "useUnifiedTopology": true
      }
    },
    "production": {
      "uri": "process.env.MONGODB_URI",
      "options": {
        "useNewUrlParser": true,
        "useUnifiedTopology": true,
        "maxPoolSize": 10
      }
    }
  },
  "seed_script_iterations": {
    "iteration_3": {
      "collections": ["bonds"],
      "data": "10 sample bonds"
    },
    "iteration_5": {
      "collections": ["bonds", "users"],
      "data": "10 bonds + 5 test users"
    },
    "iteration_8": {
      "collections": ["bonds", "users", "portfolios"],
      "data": "10 bonds + 5 users + sample portfolios"
    }
  },
  "backup_strategy": {
    "hackathon": "Manual export before major changes",
    "post_hackathon": "MongoDB Atlas with automated backups"
  },
  "redis_optional": {
    "when_to_add": "Post-hackathon or if performance issues",
    "use_cases": [
      "Session caching",
      "Rate limiting",
      "Real-time price caching"
    ]
  },
  "quick_start": {
    "install_mongodb": "Using local MongoDB or MongoDB Atlas",
    "connection_test": "mongosh mongodb://localhost:27017",
    "create_db": "use mudra_dev",
    "run_seed": "node scripts/seed.js"
  }
}
