{
  "project": {
    "name": "Mudra Backend",
    "framework": "Express.js",
    "approach": "Incremental Development",
    "port": 3210
  },
  "development_phases": {
    "phase_1_minimal": {
      "description": "Just get server running",
      "iterations": "0-2",
      "stack": "Express.js + CORS",
      "database": "JSON file (no DB yet)"
    },
    "phase_2_database": {
      "description": "Add MongoDB",
      "iterations": "3-4",
      "stack": "Express.js + Mongoose",
      "database": "MongoDB"
    },
    "phase_3_auth": {
      "description": "Add authentication",
      "iterations": "5-6",
      "additions": ["bcryptjs", "jsonwebtoken"],
      "focus": "Security basics"
    },
    "phase_4_trading": {
      "description": "Trading functionality",
      "iterations": "7-10",
      "focus": "Buy/Sell/Portfolio logic"
    },
    "phase_5_advanced": {
      "description": "Polish and extras",
      "iterations": "11-20",
      "additions": ["Socket.io", "Redis (optional)"],
      "focus": "Real-time, performance"
    }
  },
  "incremental_structure": {
    "iteration_0": {
      "folder_structure": {
        "backend/": {
          "server.js": "Express app with CORS",
          "package.json": "Basic dependencies"
        }
      },
      "endpoints": [
        {
          "method": "GET",
          "path": "/api/health",
          "description": "Health check",
          "returns": "{ status: 'ok', timestamp: Date }"
        }
      ],
      "dependencies": ["express", "cors", "dotenv"],
      "files_to_create": 2
    },
    "iteration_2": {
      "additions": {
        "data/": {
          "bonds.json": "Sample bond data"
        },
        "routes/": {
          "bonds.js": "Bond routes"
        }
      },
      "endpoints": [
        {
          "method": "GET",
          "path": "/api/bonds",
          "description": "Get all bonds",
          "returns": "Array of bonds from JSON file"
        }
      ],
      "files_to_create": 2
    },
    "iteration_3": {
      "additions": {
        "config/": {
          "db.js": "MongoDB connection"
        },
        "models/": {
          "Bond.js": "Bond schema"
        },
        "scripts/": {
          "seed.js": "Database seeding"
        }
      },
      "endpoints": [
        {
          "method": "GET",
          "path": "/api/bonds",
          "description": "Get all bonds from MongoDB",
          "returns": "Array of Bond documents"
        },
        {
          "method": "GET",
          "path": "/api/bonds/:id",
          "description": "Get single bond",
          "returns": "Bond document or 404"
        }
      ],
      "dependencies_add": ["mongoose"],
      "files_to_create": 3
    },
    "iteration_5": {
      "additions": {
        "models/": {
          "User.js": "User schema"
        },
        "routes/": {
          "auth.js": "Authentication routes"
        },
        "middleware/": {
          "auth.js": "JWT verification middleware"
        }
      },
      "endpoints": [
        {
          "method": "POST",
          "path": "/api/auth/register",
          "description": "Register new user",
          "body": "{ email, password, name }",
          "returns": "{ token, user }"
        },
        {
          "method": "POST",
          "path": "/api/auth/login",
          "description": "Login user",
          "body": "{ email, password }",
          "returns": "{ token, user }"
        }
      ],
      "dependencies_add": ["bcryptjs", "jsonwebtoken"],
      "files_to_create": 3
    },
    "iteration_6": {
      "additions": {
        "routes/": {
          "users.js": "User routes"
        }
      },
      "endpoints": [
        {
          "method": "GET",
          "path": "/api/users/me",
          "description": "Get current user",
          "auth": "Required",
          "returns": "User document"
        }
      ],
      "files_to_create": 1
    },
    "iteration_8_9_10": {
      "additions": {
        "models/": {
          "Transaction.js": "Transaction schema",
          "Portfolio.js": "Portfolio schema"
        },
        "routes/": {
          "trading.js": "Trading routes",
          "portfolio.js": "Portfolio routes"
        }
      },
      "endpoints": [
        {
          "method": "POST",
          "path": "/api/paper-trading/buy",
          "description": "Buy bonds",
          "auth": "Required",
          "body": "{ bondId, quantity }",
          "returns": "{ transaction, newBalance }"
        },
        {
          "method": "POST",
          "path": "/api/paper-trading/sell",
          "description": "Sell bonds",
          "auth": "Required",
          "body": "{ bondId, quantity }",
          "returns": "{ transaction, newBalance }"
        },
        {
          "method": "GET",
          "path": "/api/portfolio",
          "description": "Get user portfolio",
          "auth": "Required",
          "returns": "Portfolio with holdings"
        }
      ],
      "files_to_create": 4
    },
    "iteration_11": {
      "modifications": {
        "routes/bonds.js": "Add search/filter query params"
      },
      "endpoints": [
        {
          "method": "GET",
          "path": "/api/bonds?search=&risk=&minReturn=&sort=",
          "description": "Search and filter bonds",
          "returns": "Filtered array of bonds"
        }
      ]
    },
    "iteration_14": {
      "additions": {
        "routes/": {
          "transactions.js": "Transaction history routes"
        }
      },
      "endpoints": [
        {
          "method": "GET",
          "path": "/api/transactions?type=&page=&limit=",
          "description": "Get transaction history",
          "auth": "Required",
          "returns": "Paginated transactions"
        }
      ],
      "files_to_create": 1
    },
    "iteration_17": {
      "modifications": {
        "routes/users.js": "Add profile update"
      },
      "endpoints": [
        {
          "method": "PUT",
          "path": "/api/users/me",
          "description": "Update user profile",
          "auth": "Required",
          "body": "{ name, email }",
          "returns": "Updated user"
        },
        {
          "method": "PUT",
          "path": "/api/users/me/password",
          "description": "Change password",
          "auth": "Required",
          "body": "{ oldPassword, newPassword }",
          "returns": "Success message"
        }
      ]
    },
    "iteration_19": {
      "additions": {
        "socket/": {
          "index.js": "Socket.io setup",
          "priceUpdates.js": "Price simulation"
        }
      },
      "dependencies_add": ["socket.io"],
      "features": ["Real-time price updates", "Connection management"],
      "files_to_create": 2
    },
    "iteration_20": {
      "additions": {
        "routes/": {
          "leaderboard.js": "Leaderboard routes"
        }
      },
      "endpoints": [
        {
          "method": "GET",
          "path": "/api/leaderboard",
          "description": "Get top traders",
          "returns": "Ranked list of users by returns"
        }
      ],
      "files_to_create": 1
    }
  },
  "models_by_iteration": {
    "iteration_3": {
      "Bond": {
        "fields": {
          "name": "String, required",
          "issuer": "String, required",
          "returnRate": "Number, required",
          "riskLevel": "String, enum: [Low, Medium, High]",
          "price": "Number, required",
          "description": "String"
        }
      }
    },
    "iteration_5": {
      "User": {
        "fields": {
          "email": "String, required, unique",
          "password": "String, required (hashed)",
          "name": "String, required",
          "wallet": "Number, default: 1000000",
          "createdAt": "Date, default: now"
        }
      }
    },
    "iteration_8": {
      "Transaction": {
        "fields": {
          "user": "ObjectId, ref: User",
          "bond": "ObjectId, ref: Bond",
          "type": "String, enum: [buy, sell]",
          "quantity": "Number, required",
          "price": "Number, required",
          "total": "Number, required",
          "createdAt": "Date, default: now"
        }
      },
      "Portfolio": {
        "fields": {
          "user": "ObjectId, ref: User, unique",
          "holdings": [{
            "bond": "ObjectId, ref: Bond",
            "quantity": "Number",
            "avgPrice": "Number"
          }]
        }
      }
    },
    "iteration_13": {
      "Bond_update": {
        "add_field": {
          "riskScore": "Number, min: 0, max: 100"
        }
      }
    }
  },
  "middleware_progression": {
    "iteration_0": "None",
    "iteration_5": "auth.js - JWT verification",
    "iteration_8": "Same",
    "iteration_15": "Add rate limiting (optional)"
  },
  "api_endpoints_summary": {
    "total_by_iteration": {
      "iteration_0": 1,
      "iteration_3": 3,
      "iteration_5": 5,
      "iteration_6": 6,
      "iteration_10": 9,
      "iteration_14": 10,
      "iteration_17": 12,
      "iteration_20": 13
    }
  },
  "folder_structure_final": {
    "backend/": {
      "server.js": "Main entry point",
      "config/": {
        "db.js": "Database connection"
      },
      "models/": {
        "Bond.js": "",
        "User.js": "",
        "Transaction.js": "",
        "Portfolio.js": ""
      },
      "routes/": {
        "auth.js": "",
        "bonds.js": "",
        "users.js": "",
        "trading.js": "",
        "portfolio.js": "",
        "transactions.js": "",
        "leaderboard.js": ""
      },
      "middleware/": {
        "auth.js": ""
      },
      "socket/": {
        "index.js": "",
        "priceUpdates.js": ""
      },
      "data/": {
        "bonds.json": "Sample data"
      },
      "scripts/": {
        "seed.js": "Database seeding"
      }
    }
  },
  "dependencies_progression": {
    "iteration_0": {
      "dependencies": ["express", "cors", "dotenv"],
      "devDependencies": ["nodemon"]
    },
    "iteration_3": {
      "add": ["mongoose"]
    },
    "iteration_5": {
      "add": ["bcryptjs", "jsonwebtoken"]
    },
    "iteration_19": {
      "add": ["socket.io"]
    }
  },
  "environment_variables": {
    "PORT": "3210",
    "MONGODB_URI": "mongodb://localhost:27017/mudra",
    "JWT_SECRET": "your-secret-key",
    "NODE_ENV": "development"
  },
  "quick_start_commands": {
    "create_folder": "mkdir backend && cd backend",
    "init": "npm init -y",
    "install_basic": "npm install express cors dotenv",
    "install_dev": "npm install -D nodemon",
    "run_dev": "npm run dev",
    "scripts": {
      "start": "node server.js",
      "dev": "nodemon server.js"
    }
  },
  "error_handling_approach": {
    "iteration_0_4": "Basic try-catch, send 500",
    "iteration_5_10": "Custom error messages",
    "iteration_11_20": "Error middleware, proper status codes"
  }
}
